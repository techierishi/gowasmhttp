<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Go WebAssembly: Multiply Two Numbers</title>
  <script src="wasm_exec.js"></script>
</head>
<body>
  <h1>Multiply Two Numbers with Go WebAssembly</h1>
  <textarea id="luacode" placeholder="Enter lua code"> </textarea>

  <button id="runlua">Run</button>
  <p id="result"></p>

  <script>
    const go = new Go();
    WebAssembly.instantiateStreaming(fetch("main.wasm"), go.importObject).then((result) => {
      go.run(result.instance);

      const runlua = document.getElementById("runlua");
      const luacode = document.getElementById("luacode");
      const resultElement = document.getElementById("result");

      runlua.addEventListener("click", () => {
        const result = window.runlua(luacode.value);
        resultElement.textContent = `${result}`;
      });
    });
  </script>
</body>
</html>
